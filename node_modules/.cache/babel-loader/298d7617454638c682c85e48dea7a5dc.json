{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport { bus } from \"@/bus\";\nexport default {\n  name: \"my-center\",\n  data: function data() {\n    return {\n      Id: 1,\n      pId: 1,\n      data2: [],\n      note: [],\n      fileid: 1,\n      curid: 1,\n      tableData: [],\n      name: \"\",\n      menuname: \"\",\n      totalcount: 1,\n      curpage: 1,\n      menuId: 0\n    };\n  },\n  components: {},\n  watch: {\n    // 利用watch方法检测路由变化：\n    $route: function $route() {\n      // 拿到目标参数 to.query.id 去再次请求数据接口\n      // this.getid(to.query.Id);\n      // this.getMenu();\n      this.$router.go(0);\n    }\n  },\n  methods: {\n    getid: function getid(val) {\n      var _this = this;\n\n      axios.get(\"http://cybwmy.top:8082/menu/blogs/\" + val).then(function (res) {\n        _this.tableData = res.data.object.object;\n        _this.totalcount = res.data.object.totalCount;\n\n        _this.$nextTick(function () {\n          bus.$emit(\"table\", this.tableData);\n          bus.$emit(\"total\", this.totalcount);\n        });\n      }); // this.menuname = nam;\n\n      this.menuId = val;\n      this.$nextTick(function () {\n        // bus.$emit(\"menuname\", this.menuname);\n        bus.$emit(\"menuId\", this.menuId);\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      var _this2 = this;\n\n      this.curpage = val;\n      console.log(this.curpage);\n      axios(\"http://cybwmy.top:8082.com/menu/blogs/\" + this.menuId + \"?currentPage=\" + this.curpage).then(function (res) {\n        console.log(res);\n        _this2.tableData = res.data.object.object;\n      });\n    },\n    getChileMenu: function getChileMenu(id) {\n      var _this3 = this;\n\n      axios(\"http://localhost:8080/menu/cMenu/\" + id).then(function (res) {\n        _this3.name = res.data.object.menuName;\n        _this3.data2 = res.data.object.childen;\n      });\n    },\n    getMenu: function getMenu() {\n      var f = 0;\n\n      if (localStorage.getItem(\"menuList\") != null) {\n        var data = JSON.parse(localStorage.getItem(\"menuList\"));\n\n        for (var i = 0; i < data.length; i++) {\n          if (data[i].id == this.$route.query.pId) {\n            f = 1;\n            this.name = data[i].menuName;\n            this.data2 = data[i].childen;\n          }\n        }\n      }\n\n      if (f == 0) {\n        this.getChileMenu(this.$route.query.pId);\n      }\n\n      this.Id = this.$route.query.Id;\n      this.pId = this.$route.query.pId;\n    }\n  },\n  mounted: function mounted() {\n    this.getMenu();\n    this.getid(this.$route.query.Id); //var storage = window.localStorage\n    //this.data2=JSON.parse(storage.getItem('mydata'))\n    //this.name=storage.getItem('name')\n    // bus.$on('data2',(data)=>{\n    //   this.data2=data,\n    //   storage.setItem('mydata', JSON.stringify(this.data2));\n    // })\n    // bus.$on('name',(data)=>{\n    //   this.name=data\n    //   storage.setItem('name',this.name)\n    // })\n    // bus.$on('ID',(data)=>{\n    //   console.log('收到了',data)\n    //   this.getid(data)\n    // })\n    // bus.$on('menu',(data)=>{\n    //   this.menuname=data\n    //   storage.setItem('menu',this.menuname)\n    // })\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AAEA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,KADA;MAEAC,MAFA;MAGAC,SAHA;MAIAC,QAJA;MAKAC,SALA;MAMAC,QANA;MAOAC,aAPA;MAQAR,QARA;MASAS,YATA;MAUAC,aAVA;MAWAC,UAXA;MAYAC;IAZA;EAcA,CAjBA;EAkBAC,cAlBA;EAmBAC;IAEA;IACAC;MACA;MACA;MACA;MACA;IACA;EARA,CAnBA;EA8BAC;IACAC,KADA,iBACAC,GADA,EACA;MAAA;;MACAC;QACA;QACA;;QACA;UACAC;UACAA;QACA,CAHA;MAIA,CAPA,EADA,CASA;;MACA;MACA;QACA;QACAA;MACA,CAHA;IAIA,CAhBA;IAkBAC,mBAlBA,+BAkBAH,GAlBA,EAkBA;MAAA;;MACA;MACAI;MACAH,MACA,2CACA,WADA,GAEA,eAFA,GAGA,YAJA,EAKAI,IALA,CAKA;QACAD;QACA;MACA,CARA;IASA,CA9BA;IA+BAE,YA/BA,wBA+BAC,EA/BA,EA+BA;MAAA;;MACAN;QACA;QACA;MACA,CAHA;IAIA,CApCA;IAqCAO,OArCA,qBAqCA;MACA;;MACA;QACA;;QACA;UACA;YACAC;YACA;YACA;UACA;QACA;MACA;;MACA;QACA;MACA;;MACA;MACA;IACA;EAtDA,CA9BA;EAsFAC,OAtFA,qBAsFA;IAEA;IACA,iCAHA,CAKA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AA9GA","names":["name","data","Id","pId","data2","note","fileid","curid","tableData","menuname","totalcount","curpage","menuId","components","watch","$route","methods","getid","val","axios","bus","handleCurrentChange","console","then","getChileMenu","id","getMenu","f","mounted"],"sourceRoot":"src/components","sources":["my-center.vue"],"sourcesContent":["<template>\n  <div :span=\"12\" width=\"380px\" class=\"left\">\n    <div id=\"d1\">\n      <h4>{{ name }}</h4>\n      <el-menu\n        :default-active=\"$route.path+'?Id=' + Id + '&pId=' + pId\"\n        mode=\"horizontal\"\n        class=\"el-menu-vertical-demo\"\n        :router=\"true\"\n      >\n        <el-menu-item\n          v-for=\"(p, i) in data2\"\n          :key=\"i\"\n          :index=\"'/center/note?Id=' + p.id + '&pId=' + p.parentCid\"\n        >\n        <!-- @click=\"getid(p.id, p.menuName)\"   -->\n          <i class=\"el-icon-location\"></i>\n          <span slot=\"title\">{{ p.menuName }}</span>\n        </el-menu-item>\n      </el-menu>\n    </div>\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { bus } from \"@/bus\";\n\nexport default {\n  name: \"my-center\",\n  data() {\n    return {\n      Id: 1,\n      pId: 1,\n      data2: [],\n      note: [],\n      fileid: 1,\n      curid: 1,\n      tableData: [],\n      name: \"\",\n      menuname: \"\",\n      totalcount: 1,\n      curpage: 1,\n      menuId: 0,\n    };\n  },\n  components: {},\n  watch: {\n    \n    // 利用watch方法检测路由变化：\n    $route: function () {\n      // 拿到目标参数 to.query.id 去再次请求数据接口\n      // this.getid(to.query.Id);\n      // this.getMenu();\n      this.$router.go(0)\n    },\n    \n  },\n  methods: {\n    getid(val) {\n      axios.get(\"http://cybwmy.top:8082/menu/blogs/\" + val).then((res) => {\n        this.tableData = res.data.object.object;\n        this.totalcount = res.data.object.totalCount;\n        this.$nextTick(function () {\n          bus.$emit(\"table\", this.tableData);\n          bus.$emit(\"total\", this.totalcount);\n        });\n      });\n      // this.menuname = nam;\n      this.menuId = val;\n      this.$nextTick(function () {\n        // bus.$emit(\"menuname\", this.menuname);\n        bus.$emit(\"menuId\", this.menuId);\n      });\n    },\n\n    handleCurrentChange(val) {\n      this.curpage = val;\n      console.log(this.curpage);\n      axios(\n        \"http://cybwmy.top:8082.com/menu/blogs/\" +\n          this.menuId +\n          \"?currentPage=\" +\n          this.curpage\n      ).then((res) => {\n        console.log(res);\n        this.tableData = res.data.object.object;\n      });\n    },\n    getChileMenu(id) {\n      axios(\"http://localhost:8080/menu/cMenu/\" + id).then((res) => {\n        this.name = res.data.object.menuName;\n        this.data2 = res.data.object.childen;\n      });\n    },\n    getMenu() {\n      let f = 0;\n      if (localStorage.getItem(\"menuList\") != null) {\n        let data = JSON.parse(localStorage.getItem(\"menuList\"));\n        for (let i = 0; i < data.length; i++) {\n          if (data[i].id == this.$route.query.pId) {\n            f = 1;\n            this.name = data[i].menuName;\n            this.data2 = data[i].childen;\n          }\n        }\n      }\n      if (f == 0) {\n        this.getChileMenu(this.$route.query.pId);\n      }\n      this.Id = this.$route.query.Id;\n      this.pId = this.$route.query.pId;\n    },\n  },\n  mounted() {\n    \n    this.getMenu();\n    this.getid(this.$route.query.Id);\n    \n    //var storage = window.localStorage\n    //this.data2=JSON.parse(storage.getItem('mydata'))\n    //this.name=storage.getItem('name')\n    // bus.$on('data2',(data)=>{\n    //   this.data2=data,\n    //   storage.setItem('mydata', JSON.stringify(this.data2));\n    // })\n    // bus.$on('name',(data)=>{\n    //   this.name=data\n    //   storage.setItem('name',this.name)\n    // })\n    // bus.$on('ID',(data)=>{\n    //   console.log('收到了',data)\n    //   this.getid(data)\n    // })\n    // bus.$on('menu',(data)=>{\n    //   this.menuname=data\n    //   storage.setItem('menu',this.menuname)\n    // })\n  },\n};\n</script>\n\n<style scoped>\n#d1 {\n  width: 200px;\n  margin-right: 0px;\n  height: 650px;\n}\n.left {\n  height: auto;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}